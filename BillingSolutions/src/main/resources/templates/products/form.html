<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Product</title>-->
<!--    <script>-->
<!--        function toggleFields() {-->
<!--            const unitType = document.getElementById("unitTypeSelect").value;-->
<!--            const pcsFields = document.getElementById("pcs-fields");-->
<!--            const kgFields = document.getElementById("kg-fields");-->

<!--            if (unitType === "PCS") {-->
<!--                pcsFields.style.display = "block";-->
<!--                kgFields.style.display = "none";-->
<!--            } else if (unitType === "KG") {-->
<!--                pcsFields.style.display = "none";-->
<!--                kgFields.style.display = "block";-->
<!--            } else {-->
<!--                pcsFields.style.display = "none";-->
<!--                kgFields.style.display = "none";-->
<!--            }-->
<!--        }-->

<!--        window.addEventListener("DOMContentLoaded", toggleFields);-->
<!--    </script>-->
<!--</head>-->
<!--<body>-->
<!--    <h2>Product</h2>-->

<!--     Use th:if to separate create and update action -->
  
<!--	<form th:object="${product}" -->
<!--		      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--		      method="post">-->

<!--        <div>-->
<!--            <label>Name</label>-->
<!--            <input th:field="*{name}" required />-->
<!--        </div>-->

<!--        <div>-->
<!--            <label>SKU</label>-->
<!--            <input th:field="*{sku}" />-->
<!--        </div>-->

<!--        <div>-->
<!--            <label>Selling Price</label>-->
<!--            <input th:field="*{sellingPrice}" type="number" step="0.01" required />-->
<!--        </div>-->

<!--        <div>-->
<!--            <label>Cost Price</label>-->
<!--            <input th:field="*{costPrice}" type="number" step="0.01" required />-->
<!--        </div>-->

<!--        <div>-->
<!--            <label>Unit type</label>-->
<!--            <select id="unitTypeSelect" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                <option th:value="PCS" th:selected="${product.unitType == T(com.billingsolutions.model.UnitType).PCS}">PCS</option>-->
<!--                <option th:value="KG" th:selected="${product.unitType == T(com.billingsolutions.model.UnitType).KG}">KG</option>-->
<!--            </select>-->
<!--        </div>-->

<!--         PCS-specific fields -->
<!--        <div id="pcs-fields" style="display:none; margin-top: 10px;">-->
<!--            <div>-->
<!--                <label>Number of Boxes</label>-->
<!--                <input th:field="*{numberOfBoxes}" type="number" step="1" min="0" />-->
<!--            </div>-->
<!--            <div>-->
<!--                <label>Units per Box</label>-->
<!--                <input th:field="*{unitsPerBox}" type="number" step="1" min="1" />-->
<!--            </div>-->
<!--        </div>-->

<!--         KG-specific fields -->
<!--        <div id="kg-fields" style="display:none; margin-top: 10px;">-->
<!--            <div>-->
<!--                <label>Weight per Item (Kg)</label>-->
<!--                <input th:field="*{weightPerItem}" type="number" step="0.01" min="0.01" />-->
<!--            </div>-->
<!--            <div>-->
<!--                <label>Total Weight of Bag (Kg)</label>-->
<!--                <input th:field="*{totalBagWeight}" type="number" step="0.01" min="0.01" />-->
<!--            </div>-->
<!--            <div>-->
<!--                <label>Total Number of Bags</label>-->
<!--                <input th:field="*{totalBags}" type="number" step="1" min="1" />-->
<!--            </div>-->
<!--        </div>-->

<!--        <div style="margin-top: 15px;">-->
<!--            <button type="submit">Save</button>-->
<!--        </div>-->

<!--    </form>-->
	
<!--This is completly working -->



<!--	<form th:object="${product}" -->
<!--	      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--	      method="post">-->
<!--		<div>-->
<!--		<lable>Product Name</lable>-->
<!--	    <input type="text" th:field="*{name}" placeholder="Product Name"/>-->
<!--		</div>-->
<!--		<div>-->
<!--		<lable>Cost price per pcs</lable>-->
<!--	    <input type="number" th:field="*{costPrice}" placeholder="Cost Price"/>-->
<!--		</div>-->
<!--		<div>-->
<!--		<lable>Selling price per pcs</lable>-->
<!--	    <input type="number" th:field="*{sellingPrice}" placeholder="Selling Price"/>-->
<!--		</div>-->
<!--		<div>-->
<!--		<select th:field="*{unitType}">-->
<!--		    <option th:each="ut : ${T(com.billingsolutions.model.UnitType).values()}"-->
<!--		            th:value="${ut}" th:text="${ut}"></option>-->
<!--		</select>-->
<!--		</div>-->
		
<!--	    <button type="submit">Save</button>-->
<!--	</form>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Product Form</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            margin: 20px;-->
<!--        }-->
<!--        label {-->
<!--            display: block;-->
<!--            margin-bottom: 5px;-->
<!--            font-weight: bold;-->
<!--        }-->
<!--        input, select {-->
<!--            width: 250px;-->
<!--            padding: 5px;-->
<!--            margin-bottom: 15px;-->
<!--        }-->
<!--        button {-->
<!--            padding: 8px 15px;-->
<!--            font-size: 16px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<h2 th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h2>-->

<!--<form th:object="${product}" -->
<!--      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--      method="post">-->

<!--    <div>-->
<!--        <label>Name</label>-->
<!--        <input th:field="*{name}" placeholder="Product Name" required />-->
<!--    </div>-->

<!--    <div>-->
<!--        <label>SKU</label>-->
<!--        <input th:field="*{sku}" placeholder="Product SKU" />-->
<!--    </div>-->

<!--    <div>-->
<!--        <label>Selling Price</label>-->
<!--        <input th:field="*{sellingPrice}" type="number" step="0.01" placeholder="Selling Price" required />-->
<!--    </div>-->

<!--    <div>-->
<!--        <label>Cost Price</label>-->
<!--        <input th:field="*{costPrice}" type="number" step="0.01" placeholder="Cost Price" required />-->
<!--    </div>-->

<!--    <div>-->
<!--        <label>GST Rate (%)</label>-->
<!--        <select th:field="*{gstRate}">-->
<!--            <option value="0.00">0%</option>-->
<!--            <option value="5.00">5%</option>-->
<!--            <option value="12.00">12%</option>-->
<!--            <option value="18.00">18%</option>-->
<!--            <option value="40.00">40%</option>-->
<!--        </select>-->
<!--    </div>-->

<!--    <div>-->
<!--        <label>Unit Type</label>-->
<!--        <select id="unitTypeSelect" th:field="*{unitType}" onchange="toggleFields()">-->
<!--            <option th:value="PCS" th:selected="${product.unitType == T(com.billingsolutions.model.UnitType).PCS}">PCS</option>-->
<!--            <option th:value="KG" th:selected="${product.unitType == T(com.billingsolutions.model.UnitType).KG}">KG</option>-->
<!--        </select>-->
<!--    </div>-->
<!--	<div>-->
<!--	    <label for="unitType">Unit Type</label>-->
<!--	    <select id="unitTypeSelect" th:field="*{unitType}" onchange="toggleFields()">-->
<!--	        <option th:each="ut : ${T(com.billingsolutions.model.UnitType).values()}"-->
<!--	                th:value="${ut}"-->
<!--	                th:text="${ut}">-->
<!--	        </option>-->
<!--	    </select>-->
<!--	</div>-->

<!--     PCS-specific fields -->
<!--    <div id="pcs-fields" style="display:none; margin-top: 10px;">-->
<!--        <div>-->
<!--            <label>Number of Boxes</label>-->
<!--            <input th:field="*{numberOfBoxes}" type="number" step="1" min="0" />-->
<!--        </div>-->
<!--        <div>-->
<!--            <label>Units per Box</label>-->
<!--            <input th:field="*{unitsPerBox}" type="number" step="1" min="0" />-->
<!--        </div>-->
<!--    </div>-->

<!--     KG-specific fields -->
<!--    <div id="kg-fields" style="display:none; margin-top: 10px;">-->
<!--        <div>-->
<!--            <label>Weight per Item (Kg)</label>-->
<!--            <input th:field="*{weightPerItem}" type="number" step="0.01" min="0.00" />-->
<!--        </div>-->
<!--        <div>-->
<!--            <label>Total Weight of Bag (Kg)</label>-->
<!--            <input th:field="*{totalBagWeight}" type="number" step="0.01" min="0.00" />-->
<!--        </div>-->
<!--        <div>-->
<!--            <label>Total Number of Bags</label>-->
<!--            <input th:field="*{totalBags}" type="number" step="1" min="0" />-->
<!--        </div>-->
<!--    </div>-->

<!--    <div>-->
<!--        <button type="submit">Save</button>-->
<!--    </div>-->

<!--</form>-->

<!--<script>-->
<!--    function toggleFields() {-->
<!--        const unitType = document.getElementById("unitTypeSelect").value;-->
<!--        document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--        document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--    }-->

<!--    window.addEventListener('DOMContentLoaded', () => {-->
<!--        toggleFields();-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></title>-->
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .form-card {-->
<!--            margin-top: 4rem;-->
<!--            margin-bottom: 4rem;-->
<!--        }-->
<!--        .form-header {-->
<!--            background-color: #e9ecef;-->
<!--            border-bottom: 1px solid #dee2e6;-->
<!--        }-->
<!--        .form-header h1 {-->
<!--            margin-bottom: 0;-->
<!--        }-->
<!--        #pcs-fields, #kg-fields {-->
<!--            padding: 1rem;-->
<!--            border: 1px solid #dee2e6;-->
<!--            border-radius: 0.375rem;-->
<!--            margin-top: 1rem;-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--    <div class="container">-->
<!--        <div class="card form-card">-->
<!--            <div class="card-header form-header py-3">-->
<!--                <h1 class="h4" th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h1>-->
<!--            </div>-->
<!--            <div class="card-body p-4">-->
<!--                <form th:object="${product}" -->
<!--                      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                      method="post">-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="name" class="form-label">Name</label>-->
<!--                            <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Product Name" required />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sku" class="form-label">SKU</label>-->
<!--                            <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="Product SKU" />-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                            <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="Selling Price" required />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                            <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="Cost Price" required />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                            <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                                <option value="0.00">0%</option>-->
<!--                                <option value="5.00">5%</option>-->
<!--                                <option value="12.00">12%</option>-->
<!--                                <option value="18.00">18%</option>-->
<!--                                <option value="40.00">40%</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                            <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                                <option th:each="ut : ${T(com.billingsolutions.model.UnitType).values()}"-->
<!--                                        th:value="${ut}"-->
<!--                                        th:text="${ut}">-->
<!--                                </option>-->
<!--								<option th:value="'PCS'" th:text="PCS"></option>-->
<!--                                <option th:value="'KG'" th:text="KG"></option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     PCS-specific fields -->
<!--                    <div id="pcs-fields" style="display:none;">-->
<!--                        <h5>PCS Details</h5>-->
<!--                        <div class="row">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                                <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                            </div>-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                                <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     KG-specific fields -->
<!--                    <div id="kg-fields" style="display:none;">-->
<!--                         <h5>KG Details</h5>-->
<!--                         <div class="row">-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                                 <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                                 <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                                 <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                             </div>-->
<!--                         </div>-->
<!--                    </div>-->
                    
<!--                    <hr class="my-4">-->

<!--                    <div class="d-flex justify-content-end">-->
<!--                        <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                        <button type="submit" class="btn btn-primary">-->
<!--                            <i class="fas fa-save me-1"></i> Save-->
<!--                        </button>-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        // This is the same function you had, it works perfectly with the new layout.-->
<!--        function toggleFields() {-->
<!--            const unitType = document.getElementById("unitTypeSelect").value;-->
<!--            document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--            document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--        }-->

<!--        // Ensure the correct fields are shown when the page loads (especially for the 'edit' case).-->
<!--        window.addEventListener('DOMContentLoaded', () => {-->
<!--            toggleFields();-->
<!--        });-->
<!--    </script>-->

<!--     Bootstrap 5 JS Bundle -->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></title>-->
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .form-card {-->
<!--            margin-top: 4rem;-->
<!--            margin-bottom: 4rem;-->
<!--        }-->
<!--        .form-header {-->
<!--            background-color: #e9ecef;-->
<!--            border-bottom: 1px solid #dee2e6;-->
<!--        }-->
<!--        .form-header h1 {-->
<!--            margin-bottom: 0;-->
<!--        }-->
<!--        #pcs-fields, #kg-fields {-->
<!--            padding: 1rem;-->
<!--            border: 1px solid #dee2e6;-->
<!--            border-radius: 0.375rem;-->
<!--            margin-top: 1rem;-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--    <div class="container">-->
<!--        <div class="card form-card">-->
<!--            <div class="card-header form-header py-3">-->
<!--                <h1 class="h4" th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h1>-->
<!--            </div>-->
<!--            <div class="card-body p-4">-->
<!--                <form th:object="${product}" -->
<!--                      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                      method="post">-->

<!--                    <div class="row">-->
<!--                        <div class="col-12 mb-3">-->
<!--                            <label for="name" class="form-label">Name</label>-->
<!--                            <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Product Name" required />-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sku" class="form-label">SKU</label>-->
<!--                            <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="Product SKU" />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="productGroup" class="form-label">Product Group</label>-->
<!--                            <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                            <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="Selling Price" required />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                            <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="Cost Price" required />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                            <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                                <option value="0.00">0%</option>-->
<!--                                <option value="5.00">5%</option>-->
<!--                                <option value="12.00">12%</option>-->
<!--                                <option value="18.00">18%</option>-->
<!--                                <option value="40.00">40%</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                            <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                                <option th:value="'PCS'" th:text="PCS"></option>-->
<!--                                <option th:value="'KG'" th:text="KG"></option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     PCS-specific fields -->
<!--                    <div id="pcs-fields" style="display:none;">-->
<!--                        <h5>PCS Details</h5>-->
<!--                        <div class="row">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                                <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                            </div>-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                                <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     KG-specific fields -->
<!--                    <div id="kg-fields" style="display:none;">-->
<!--                         <h5>KG Details</h5>-->
<!--                         <div class="row">-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                                 <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                                 <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                                 <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                             </div>-->
<!--                         </div>-->
<!--                    </div>-->
                    
<!--                    <hr class="my-4">-->

<!--                    <div class="d-flex justify-content-end">-->
<!--						<a th:href="@{/}" class="btn btn-info me-2"><i class="fas fa-home me-1"></i> Home</a>-->
<!--                        <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                        <button type="submit" class="btn btn-primary">-->
<!--                            <i class="fas fa-save me-1"></i> Save-->
<!--                        </button>-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        // This is the same function you had, it works perfectly with the new layout.-->
<!--        function toggleFields() {-->
<!--            const unitType = document.getElementById("unitTypeSelect").value;-->
<!--            document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--            document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--        }-->

<!--        // Ensure the correct fields are shown when the page loads (especially for the 'edit' case).-->
<!--        window.addEventListener('DOMContentLoaded', () => {-->
<!--            toggleFields();-->
<!--        });-->
<!--    </script>-->

<!--     Bootstrap 5 JS Bundle -->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->





<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></title>-->
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .form-card {-->
<!--            margin-top: 4rem;-->
<!--            margin-bottom: 4rem;-->
<!--        }-->
<!--        .form-header {-->
<!--            background-color: #e9ecef;-->
<!--            border-bottom: 1px solid #dee2e6;-->
<!--        }-->
<!--        .form-header h1 {-->
<!--            margin-bottom: 0;-->
<!--        }-->
<!--        #pcs-fields, #kg-fields {-->
<!--            padding: 1rem;-->
<!--            border: 1px solid #dee2e6;-->
<!--            border-radius: 0.375rem;-->
<!--            margin-top: 1rem;-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        /* Styles for the searchable dropdown */-->
<!--        .searchable-dropdown {-->
<!--            position: relative;-->
<!--        }-->
<!--        .dropdown-list {-->
<!--            position: absolute;-->
<!--            border: 1px solid #dee2e6;-->
<!--            border-top: none;-->
<!--            max-height: 200px;-->
<!--            overflow-y: auto;-->
<!--            background: white;-->
<!--            display: none;-->
<!--            z-index: 1000;-->
<!--            width: 100%;-->
<!--        }-->
<!--        .dropdown-list div {-->
<!--            padding: 0.5rem 1rem;-->
<!--            cursor: pointer;-->
<!--        }-->
<!--        .dropdown-list div:hover {-->
<!--            background-color: #f1f1f1;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--    <div class="container">-->
<!--        <div class="card form-card">-->
<!--            <div class="card-header form-header py-3">-->
<!--                <h1 class="h4" th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h1>-->
<!--            </div>-->
<!--            <div class="card-body p-4">-->
<!--                <form th:object="${product}" -->
<!--                      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                      method="post">-->

<!--                    <div class="row">-->
<!--                        <div class="col-12 mb-3">-->
<!--                            <label for="name" class="form-label">Name</label>-->
<!--                            <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Product Name" required />-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sku" class="form-label">SKU</label>-->
<!--                            <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="Product SKU" />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="productGroup" class="form-label">Product Group</label>-->
<!--                            <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                             <label for="vendorSearch" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>-->
<!--                             <div class="searchable-dropdown" id="vendorDropdown">-->
<!--                                 <input type="text" id="vendorSearch" class="form-control" th:value="${product.vendor?.name}" placeholder="Search for a vendor..." autocomplete="off">-->
<!--                                 <input type="hidden" th:field="*{vendor}">  Assumes 'vendor' is the field name on the Product entity -->
<!--                                 <div class="dropdown-list">-->
<!--                                      Assumes your controller provides a 'vendors' list -->
<!--                                     <div th:each="v : ${vendors}" th:text="${v.name}" th:data-value="${v.id}"></div>-->
<!--                                 </div>-->
<!--                             </div>-->
<!--                        </div>-->
<!--                         <div class="col-md-6 mb-3">-->
<!--                            <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                            <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                                <option value="0.00">0%</option>-->
<!--                                <option value="5.00">5%</option>-->
<!--                                <option value="12.00">12%</option>-->
<!--                                <option value="18.00">18%</option>-->
<!--                                <option value="40.00">40%</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                            <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="Selling Price" required />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                            <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="Cost Price" required />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-12 mb-3">-->
<!--                            <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                            <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                                <option th:value="'PCS'" th:text="PCS"></option>-->
<!--                                <option th:value="'KG'" th:text="KG"></option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     PCS-specific fields -->
<!--                    <div id="pcs-fields" style="display:none;">-->
<!--                        <h5>PCS Details</h5>-->
<!--                        <div class="row">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                                <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                            </div>-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                                <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     KG-specific fields -->
<!--                    <div id="kg-fields" style="display:none;">-->
<!--                         <h5>KG Details</h5>-->
<!--                         <div class="row">-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                                 <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                                 <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                                 <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                             </div>-->
<!--                         </div>-->
<!--                    </div>-->
                    
<!--                    <hr class="my-4">-->

<!--                    <div class="d-flex justify-content-end">-->
<!--						<a th:href="@{/}" class="btn btn-info me-2"><i class="fas fa-home me-1"></i> Home</a>-->
<!--                        <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                        <button type="submit" class="btn btn-primary">-->
<!--                            <i class="fas fa-save me-1"></i> Save-->
<!--                        </button>-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        function toggleFields() {-->
<!--            const unitType = document.getElementById("unitTypeSelect").value;-->
<!--            document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--            document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--        }-->
        
<!--        function setupSearchableDropdown(dropdownId) {-->
<!--            const dropdown = document.getElementById(dropdownId);-->
<!--            if (!dropdown) return;-->
            
<!--            const searchInput = dropdown.querySelector("input[type='text']");-->
<!--            const hiddenInput = dropdown.querySelector("input[type='hidden']");-->
<!--            const list = dropdown.querySelector(".dropdown-list");-->
<!--            const items = list.querySelectorAll("div");-->

<!--            searchInput.addEventListener('input', () => {-->
<!--                const filter = searchInput.value.toLowerCase();-->
<!--                let hasVisibleItems = false;-->
<!--                items.forEach(item => {-->
<!--                    const text = item.textContent.toLowerCase();-->
<!--                    const isVisible = text.includes(filter);-->
<!--                    item.style.display = isVisible ? '' : 'none';-->
<!--                    if (isVisible) hasVisibleItems = true;-->
<!--                });-->
<!--                list.style.display = hasVisibleItems ? 'block' : 'none';-->
<!--            });-->
            
<!--            // Clear hidden field if search text is cleared-->
<!--            searchInput.addEventListener('change', () => {-->
<!--                if(searchInput.value === '') {-->
<!--                    hiddenInput.value = '';-->
<!--                }-->
<!--            });-->

<!--            items.forEach(item => {-->
<!--                item.addEventListener('click', () => {-->
<!--                    searchInput.value = item.textContent;-->
<!--                    hiddenInput.value = item.dataset.value;-->
<!--                    list.style.display = 'none';-->
<!--                });-->
<!--            });-->

<!--            document.addEventListener('click', (e) => {-->
<!--                if (!dropdown.contains(e.target)) {-->
<!--                    list.style.display = 'none';-->
<!--                }-->
<!--            });-->
<!--        }-->

<!--        window.addEventListener('DOMContentLoaded', () => {-->
<!--            toggleFields();-->
<!--            setupSearchableDropdown('vendorDropdown');-->
<!--        });-->
<!--    </script>-->

<!--     Bootstrap 5 JS Bundle -->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->

<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></title>-->
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--    <style>-->
<!--        body { background-color: #f8f9fa; }-->
<!--        .form-card { margin-top: 4rem; margin-bottom: 4rem; }-->
<!--        .form-header { background-color: #e9ecef; border-bottom: 1px solid #dee2e6; }-->
<!--        .form-header h1 { margin-bottom: 0; }-->
<!--        #pcs-fields, #kg-fields { padding: 1rem; border: 1px solid #dee2e6; border-radius: 0.375rem; margin-top: 1rem; background-color: #f8f9fa; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--    <div class="container">-->
<!--        <div class="card form-card">-->
<!--            <div class="card-header form-header py-3">-->
<!--                <h1 class="h4" th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h1>-->
<!--            </div>-->
<!--            <div class="card-body p-4">-->
<!--                <form th:object="${product}" -->
<!--                      th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                      method="post">-->

<!--                    <div class="row">-->
<!--                        <div class="col-12 mb-3">-->
<!--                            <label for="name" class="form-label">Name</label>-->
<!--                            <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Product Name" required />-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sku" class="form-label">SKU</label>-->
<!--                            <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="Product SKU" />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="productGroup" class="form-label">Product Group</label>-->
<!--                            <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                             <label for="vendorName" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>-->
<!--                             <input type="text" id="vendorName" name="vendorName" class="form-control" th:value="${product.vendor?.name}" placeholder="Enter exact vendor name..." />-->
<!--								<input type="text" id="vendorName" name="vendorName" class="form-control"-->
<!--       								th:value="${product.vendor?.name}" list="vendorList"-->
<!--       								placeholder="Start typing vendor name..." autocomplete="off" />-->

<!--								<datalist id="vendorList">-->
<!--    								<option th:each="v : ${vendors}" th:value="${v.name}"></option>-->
<!--								</datalist>-->
				


<!--                        </div>-->
<!--<div class="col-md-6 mb-3 position-relative">-->
<!--				    <label for="vendorInput" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>-->
<!--				    <input type="text" id="vendorInput" name="vendorName" class="form-control" placeholder="Start typing vendor name..." autocomplete="off">-->
<!--				    <div id="vendorList" class="list-group position-absolute w-100" style="z-index: 1000; max-height: 200px; overflow-y: auto; display: none;"></div>-->
<!--				</div>-->
<!--                         <div class="col-md-6 mb-3">-->
<!--                            <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                            <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                                <option value="0.00">0%</option>-->
<!--                                <option value="5.00">5%</option>-->
<!--                                <option value="12.00">12%</option>-->
<!--                                <option value="18.00">18%</option>-->
<!--                                <option value="40.00">40%</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                            <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="Selling Price" required />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                            <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="Cost Price" required />-->
<!--                        </div>-->
<!--                    </div>-->
                    
<!--                    <div class="row">-->
<!--                        <div class="col-md-12 mb-3">-->
<!--                            <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                            <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                                <option th:value="'PCS'" th:text="PCS"></option>-->
<!--                                <option th:value="'KG'" th:text="KG"></option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     PCS-specific fields -->
<!--                    <div id="pcs-fields" style="display:none;">-->
<!--                        <h5>PCS Details</h5>-->
<!--                        <div class="row">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                                <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                            </div>-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                                <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                     KG-specific fields -->
<!--                    <div id="kg-fields" style="display:none;">-->
<!--                         <h5>KG Details</h5>-->
<!--                         <div class="row">-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                                 <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                                 <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                             </div>-->
<!--                             <div class="col-md-4 mb-3">-->
<!--                                 <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                                 <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                             </div>-->
<!--                         </div>-->
<!--                    </div>-->
                    
<!--                    <hr class="my-4">-->

<!--                    <div class="d-flex justify-content-end">-->
<!--						<a th:href="@{/}" class="btn btn-info me-2"><i class="fas fa-home me-1"></i> Home</a>-->
<!--                        <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                        <button type="submit" class="btn btn-primary">-->
<!--                            <i class="fas fa-save me-1"></i> Save-->
<!--                        </button>-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        function toggleFields() {-->
<!--            const unitType = document.getElementById("unitTypeSelect").value;-->
<!--            document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--            document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--        }-->

<!--        window.addEventListener('DOMContentLoaded', () => {-->
<!--            toggleFields();-->
<!--        });-->
<!--    </script>-->

<!--     Bootstrap 5 JS Bundle -->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->
<!--<script>-->
<!--document.addEventListener("DOMContentLoaded", function () {-->
<!--    const vendorInput = document.getElementById("vendorInput");-->
<!--    const vendorList = document.getElementById("vendorList");-->

<!--    vendorInput.addEventListener("input", function () {-->
<!--        const query = this.value;-->

<!--        if (query.length < 1) {-->
<!--            vendorList.style.display = "none";-->
<!--            return;-->
<!--        }-->

<!--        fetch(`products/vendors/search?query=${encodeURIComponent(query)}`)-->
<!--            .then(res => res.json())-->
<!--            .then(data => {-->
<!--                vendorList.innerHTML = "";-->
<!--                if (data.length === 0) {-->
<!--                    vendorList.style.display = "none";-->
<!--                    return;-->
<!--                }-->

<!--                data.forEach(name => {-->
<!--                    const item = document.createElement("a");-->
<!--                    item.href = "#";-->
<!--                    item.classList.add("list-group-item", "list-group-item-action");-->
<!--                    item.textContent = name;-->
<!--                    item.addEventListener("click", function (e) {-->
<!--                        e.preventDefault();-->
<!--                        vendorInput.value = name;-->
<!--                        vendorList.style.display = "none";-->
<!--                    });-->
<!--                    vendorList.appendChild(item);-->
<!--                });-->

<!--                vendorList.style.display = "block";-->
<!--            });-->
<!--    });-->

<!--    // Hide dropdown if clicked outside-->
<!--    document.addEventListener("click", function (e) {-->
<!--        if (!vendorList.contains(e.target) && e.target !== vendorInput) {-->
<!--            vendorList.style.display = "none";-->
<!--        }-->
<!--    });-->
<!--});-->
<!--</script>-->




<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></title>-->
    
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->

<!--    <style>-->
<!--        body { background-color: #f8f9fa; }-->
<!--        .form-card { margin-top: 4rem; margin-bottom: 4rem; }-->
<!--        .form-header { background-color: #e9ecef; border-bottom: 1px solid #dee2e6; }-->
<!--        .form-header h1 { margin-bottom: 0; }-->
<!--        #pcs-fields, #kg-fields { padding: 1rem; border: 1px solid #dee2e6; border-radius: 0.375rem; margin-top: 1rem; background-color: #f8f9fa; }-->
        
<!--        /* Vendor dropdown styling */-->
<!--        #vendorList {-->
<!--            border-radius: 0.375rem;-->
<!--            box-shadow: 0 4px 8px rgba(0,0,0,0.1);-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<div class="container">-->
<!--    <div class="card form-card">-->
<!--        <div class="card-header form-header py-3">-->
<!--            <h1 class="h4" th:text="${product.id != null} ? 'Edit Product' : 'Create Product'"></h1>-->
<!--        </div>-->
<!--        <div class="card-body p-4">-->
<!--            <form th:object="${product}" -->
<!--                  th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                  method="post">-->

<!--                 Product Name -->
<!--                <div class="row">-->
<!--                    <div class="col-12 mb-3">-->
<!--                        <label for="name" class="form-label">Name</label>-->
<!--                        <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Product Name" required />-->
<!--                    </div>-->
<!--                </div>-->

<!--                 SKU and Product Group -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="sku" class="form-label">SKU</label>-->
<!--                        <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="Product SKU" />-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="productGroup" class="form-label">Product Group</label>-->
<!--                        <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Vendor and GST -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3 position-relative">-->
<!--                        <label for="vendorInput" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>-->
<!--                        <input type="text" id="vendorInput" name="vendorName" class="form-control" placeholder="Start typing vendor name..." autocomplete="off">-->
<!--                        <div id="vendorList" class="list-group position-absolute" style="z-index: 1000; max-height: 200px; overflow-y: auto; display: none;"></div>-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                        <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                            <option value="0.00">0%</option>-->
<!--                            <option value="5.00">5%</option>-->
<!--                            <option value="12.00">12%</option>-->
<!--                            <option value="18.00">18%</option>-->
<!--                            <option value="40.00">40%</option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Selling and Cost Price -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                        <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="Selling Price" required />-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                        <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="Cost Price" required />-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Unit Type -->
<!--                <div class="row">-->
<!--                    <div class="col-md-12 mb-3">-->
<!--                        <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                        <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                            <option th:value="'PCS'" th:text="PCS"></option>-->
<!--                            <option th:value="'KG'" th:text="KG"></option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->

<!--                 PCS-specific fields -->
<!--                <div id="pcs-fields" style="display:none;">-->
<!--                    <h5>PCS Details</h5>-->
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                            <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                            <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                 KG-specific fields -->
<!--                <div id="kg-fields" style="display:none;">-->
<!--                     <h5>KG Details</h5>-->
<!--                     <div class="row">-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                             <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                         </div>-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                             <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                         </div>-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                             <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                         </div>-->
<!--                     </div>-->
<!--                </div>-->

<!--                <hr class="my-4">-->
<!--                <div class="d-flex justify-content-end">-->
<!--                    <a th:href="@{/}" class="btn btn-info me-2"><i class="fas fa-home me-1"></i> Home</a>-->
<!--                    <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                    <button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i> Save</button>-->
<!--                </div>-->

<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--function toggleFields() {-->
<!--    const unitType = document.getElementById("unitTypeSelect").value;-->
<!--    document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--    document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--}-->

<!--window.addEventListener('DOMContentLoaded', () => {-->
<!--    toggleFields();-->
<!--});-->
<!--</script>-->

<!-- Bootstrap 5 JS Bundle -->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->

<!-- Vendor Autocomplete JS -->
<!--<script>-->
<!--document.addEventListener("DOMContentLoaded", function () {-->
<!--    const vendorInput = document.getElementById("vendorInput");-->
<!--    const vendorList = document.getElementById("vendorList");-->

<!--    vendorInput.addEventListener("input", function () {-->
<!--        const query = this.value;-->

<!--        // Match dropdown width to input-->
<!--        vendorList.style.width = `${vendorInput.offsetWidth}px`;-->

<!--        if (query.length < 1) {-->
<!--            vendorList.style.display = "none";-->
<!--            return;-->
<!--        }-->

<!--        fetch(`/products/vendors/search?query=${encodeURIComponent(query)}`)-->
<!--            .then(res => res.json())-->
<!--            .then(data => {-->
<!--                vendorList.innerHTML = "";-->
<!--                if (data.length === 0) {-->
<!--                    vendorList.style.display = "none";-->
<!--                    return;-->
<!--                }-->

<!--                data.forEach(name => {-->
<!--                    const item = document.createElement("a");-->
<!--                    item.href = "#";-->
<!--                    item.classList.add("list-group-item", "list-group-item-action");-->
<!--                    item.textContent = name;-->
<!--                    item.addEventListener("click", function (e) {-->
<!--                        e.preventDefault();-->
<!--                        vendorInput.value = name;-->
<!--                        vendorList.style.display = "none";-->
<!--                    });-->
<!--                    vendorList.appendChild(item);-->
<!--                });-->

<!--                vendorList.style.display = "block";-->
<!--            });-->
<!--    });-->

<!--    // Hide dropdown if clicked outside-->
<!--    document.addEventListener("click", function (e) {-->
<!--        if (!vendorList.contains(e.target) && e.target !== vendorInput) {-->
<!--            vendorList.style.display = "none";-->
<!--        }-->
<!--    });-->
<!--});-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${product.id != null ? 'Edit Product' : 'Create Product'}"></title>-->
    
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->

<!--    <style>-->
<!--        body { -->
<!--            background-color: #f8f9fa;-->
<!--            padding-top: 70px; /* Added padding for the fixed navbar */-->
<!--        }-->
<!--        .form-card { margin-top: 2rem; margin-bottom: 4rem; }-->
<!--        #pcs-fields, #kg-fields { padding: 1rem; border: 1px solid #dee2e6; border-radius: 0.375rem; margin-top: 1rem; background-color: #f8f9fa; }-->
<!--        .navbar { box-shadow: 0 2px 4px rgba(0,0,0,.1); }-->
<!--        .user-info .nav-link { display: flex; align-items: center; }-->
<!--        .user-info .fa-user-circle { font-size: 1.5rem; margin-right: 0.5rem; }-->
<!--        .dropdown-list { position: absolute; border: 1px solid #ddd; border-top: none; max-height: 200px; overflow-y: auto; background: white; display: none; z-index: 1000; width: 100%; box-sizing: border-box; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }-->
<!--        .dropdown-list div { padding: 8px; cursor: pointer; }-->
<!--        .dropdown-list div:hover { background-color: #f1f1f1; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--     Consistent Navigation Bar -->
<!--	<div th:replace="~{fragments/navbar :: navbar}"></div>-->

<!--<div class="container">-->
<!--    <div class="card form-card shadow-sm">-->
<!--        <div class="card-header bg-light py-3">-->
<!--            <h1 class="h4 mb-0" th:text="${product.id != null ? 'Edit Product' : 'Create New Product'}"></h1>-->
<!--        </div>-->
<!--        <div class="card-body p-4">-->
<!--            <form th:object="${product}" -->
<!--                  th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}" -->
<!--                  method="post">-->

<!--                 Product Name -->
<!--                <div class="mb-3">-->
<!--                    <label for="name" class="form-label">Product Name</label>-->
<!--                    <input type="text" id="name" class="form-control" th:field="*{name}" placeholder="Enter product name" required />-->
<!--                </div>-->

<!--                 SKU and Product Group -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="sku" class="form-label">SKU</label>-->
<!--                        <input type="text" id="sku" class="form-control" th:field="*{sku}" placeholder="e.g., SKU12345" />-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="productGroup" class="form-label">Product Group</label>-->
<!--                        <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Vendor and GST -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3 position-relative">-->
<!--                        <label for="vendorInput" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>-->
<!--                        <input type="text" id="vendorInput" name="vendorName" class="form-control" placeholder="Type to search for a vendor..." th:value="${product.vendor?.name}" autocomplete="off">-->
<!--                        <div class="dropdown-list" id="vendorList"></div>-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="gstRate" class="form-label">GST Rate (%)</label>-->
<!--                        <select id="gstRate" class="form-select" th:field="*{gstRate}">-->
<!--                            <option value="0.00">0%</option>-->
<!--                            <option value="5.00">5%</option>-->
<!--                            <option value="12.00">12%</option>-->
<!--                            <option value="18.00">18%</option>-->
<!--                            <option value="40.00">40%</option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Selling and Cost Price -->
<!--                <div class="row">-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="sellingPrice" class="form-label">Selling Price</label>-->
<!--                        <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}" step="0.01" placeholder="0.00" required />-->
<!--                    </div>-->
<!--                    <div class="col-md-6 mb-3">-->
<!--                        <label for="costPrice" class="form-label">Cost Price</label>-->
<!--                        <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}" step="0.01" placeholder="0.00" required />-->
<!--                    </div>-->
<!--                </div>-->

<!--                 Unit Type -->
<!--                <div class="mb-3">-->
<!--                    <label for="unitTypeSelect" class="form-label">Unit Type</label>-->
<!--                    <select id="unitTypeSelect" class="form-select" th:field="*{unitType}" onchange="toggleFields()">-->
<!--                        <option th:value="'PCS'" th:text="PCS"></option>-->
<!--                        <option th:value="'KG'" th:text="KG"></option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                 PCS-specific fields -->
<!--                <div id="pcs-fields" style="display:none;">-->
<!--                    <h5>PCS Details</h5>-->
<!--                    <div class="row">-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="numberOfBoxes" class="form-label">Number of Boxes</label>-->
<!--                            <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}" step="1" min="0" />-->
<!--                        </div>-->
<!--                        <div class="col-md-6 mb-3">-->
<!--                            <label for="unitsPerBox" class="form-label">Units per Box</label>-->
<!--                            <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}" step="1" min="0" />-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                 KG-specific fields -->
<!--                <div id="kg-fields" style="display:none;">-->
<!--                     <h5>KG Details</h5>-->
<!--                     <div class="row">-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>-->
<!--                             <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}" step="0.01" min="0.00" />-->
<!--                         </div>-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>-->
<!--                             <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}" step="0.01" min="0.00" />-->
<!--                         </div>-->
<!--                         <div class="col-md-4 mb-3">-->
<!--                             <label for="totalBags" class="form-label">Total Number of Bags</label>-->
<!--                             <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}" step="1" min="0" />-->
<!--                         </div>-->
<!--                     </div>-->
<!--                </div>-->

<!--                <hr class="my-4">-->
<!--                <div class="d-flex justify-content-end">-->
<!--                    <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>-->
<!--                    <button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i> Save Product</button>-->
<!--                </div>-->

<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--function toggleFields() {-->
<!--    const unitType = document.getElementById("unitTypeSelect").value;-->
<!--    document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";-->
<!--    document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";-->
<!--}-->

<!--window.addEventListener('DOMContentLoaded', () => {-->
<!--    toggleFields();-->
<!--});-->
<!--</script>-->

<!-- Bootstrap 5 JS Bundle -->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->

<!-- Vendor Autocomplete JS -->
<!--<script>-->
<!--document.addEventListener("DOMContentLoaded", function () {-->
<!--    const vendorInput = document.getElementById("vendorInput");-->
<!--    const vendorList = document.getElementById("vendorList");-->

<!--    vendorInput.addEventListener("input", function () {-->
<!--        const query = this.value;-->
<!--        vendorList.style.width = `${vendorInput.offsetWidth}px`;-->
<!--        if (query.length < 1) {-->
<!--            vendorList.style.display = "none";-->
<!--            return;-->
<!--        }-->
<!--        fetch(`/products/vendors/search?query=${encodeURIComponent(query)}`)-->
<!--            .then(res => res.json())-->
<!--            .then(data => {-->
<!--                vendorList.innerHTML = "";-->
<!--                if (data.length === 0) {-->
<!--                    vendorList.style.display = "none";-->
<!--                    return;-->
<!--                }-->
<!--                data.forEach(name => {-->
<!--                    const item = document.createElement("a");-->
<!--                    item.href = "#";-->
<!--                    item.classList.add("list-group-item", "list-group-item-action");-->
<!--                    item.textContent = name;-->
<!--                    item.addEventListener("click", function (e) {-->
<!--                        e.preventDefault();-->
<!--                        vendorInput.value = name;-->
<!--                        vendorList.style.display = "none";-->
<!--                    });-->
<!--                    vendorList.appendChild(item);-->
<!--                });-->
<!--                vendorList.style.display = "block";-->
<!--            });-->
<!--    });-->

<!--    document.addEventListener("click", function (e) {-->
<!--        if (!vendorList.contains(e.target) && e.target !== vendorInput) {-->
<!--            vendorList.style.display = "none";-->
<!--        }-->
<!--    });-->
<!--});-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${product.id != null ? 'Edit Product' : 'Create Product'}"></title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 70px; /* Added padding for the fixed navbar */
        }
        .form-card { margin-top: 2rem; margin-bottom: 4rem; }
        #pcs-fields, #kg-fields { padding: 1rem; border: 1px solid #dee2e6; border-radius: 0.375rem; margin-top: 1rem; background-color: #f8f9fa; }
        .navbar { box-shadow: 0 2px 4px rgba(0,0,0,.1); }
        .user-info .nav-link { display: flex; align-items: center; }
        .user-info .fa-user-circle { font-size: 1.5rem; margin-right: 0.5rem; }
        .dropdown-list { position: absolute; border: 1px solid #ddd; border-top: none; max-height: 200px; overflow-y: auto; background: white; display: none; z-index: 1000; width: 100%; box-sizing: border-box; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .dropdown-list div { padding: 8px; cursor: pointer; }
        .dropdown-list div:hover { background-color: #f1f1f1; }
        /* Bootstrap's invalid-feedback needs position relative on parent */
        .position-relative { position: relative; }
    </style>
</head>
<body>

    <div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="container">
    <div class="card form-card shadow-sm">
        <div class="card-header bg-light py-3">
            <h1 class="h4 mb-0" th:text="${product.id != null ? 'Edit Product' : 'Create New Product'}"></h1>
        </div>
        <div class="card-body p-4">
            <form th:object="${product}"
                  th:action="${product.id != null} ? @{/products/{id}(id=${product.id})} : @{/products}"
                  method="post">

                <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger" role="alert">
                    Please correct the errors below.
                </div>

                <div class="mb-3">
                    <label for="name" class="form-label">Product Name</label>
                    <input type="text" id="name" class="form-control" th:field="*{name}"
                           th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''"
                           placeholder="Enter product name" />
                    <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="sku" class="form-label">SKU</label>
                        <input type="text" id="sku" class="form-control" th:field="*{sku}"
                               th:classappend="${#fields.hasErrors('sku')} ? 'is-invalid' : ''"
                               placeholder="e.g., SKU12345" />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('sku')}" th:errors="*{sku}"></div>
                    </div>
					<div class="col-md-4 mb-3">
					                        <label for="hsn" class="form-label">HSN Code <span class="text-muted">(Optional)</span></label>
					                        <input type="text" id="hsn" class="form-control" th:field="*{hsn}"
					                               th:classappend="${#fields.hasErrors('hsn')} ? 'is-invalid' : ''"
					                               placeholder="e.g., 998877" />
					                        <div class="invalid-feedback" th:if="${#fields.hasErrors('hsn')}" th:errors="*{hsn}"></div>
					                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="productGroup" class="form-label">Product Group</label>
                        <input type="text" id="productGroup" class="form-control" th:field="*{productGroup}" placeholder="e.g., Spices, Snacks" />
                    </div>
					
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3 position-relative">
                        <label for="vendorInput" class="form-label">Vendor <span class="text-muted">(Optional)</span></label>
                        <input type="text" id="vendorInput" name="vendorName" class="form-control" placeholder="Type to search for a vendor..." th:value="${product.vendor?.name}" autocomplete="off">
                        <div class="dropdown-list" id="vendorList"></div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="gstRate" class="form-label">GST Rate (%)</label>
                        <select id="gstRate" class="form-select" th:field="*{gstRate}"
                                th:classappend="${#fields.hasErrors('gstRate')} ? 'is-invalid' : ''">
                            <option value="0.00">0%</option>
                            <option value="5.00">5%</option>
                            <option value="12.00">12%</option>
                            <option value="18.00">18%</option>
                            <option value="40.00">40%</option>
                        </select>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('gstRate')}" th:errors="*{gstRate}"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="sellingPrice" class="form-label">Selling Price</label>
                        <input type="number" id="sellingPrice" class="form-control" th:field="*{sellingPrice}"
                               th:classappend="${#fields.hasErrors('sellingPrice')} ? 'is-invalid' : ''"
                               step="0.01" placeholder="0.00" />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('sellingPrice')}" th:errors="*{sellingPrice}"></div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="costPrice" class="form-label">Cost Price</label>
                        <input type="number" id="costPrice" class="form-control" th:field="*{costPrice}"
                               th:classappend="${#fields.hasErrors('costPrice')} ? 'is-invalid' : ''"
                               step="0.01" placeholder="0.00" />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('costPrice')}" th:errors="*{costPrice}"></div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="unitTypeSelect" class="form-label">Unit Type</label>
                    <select id="unitTypeSelect" class="form-select" th:field="*{unitType}"
                            th:classappend="${#fields.hasErrors('unitType')} ? 'is-invalid' : ''"
                            onchange="toggleFields()">
                        <option th:value="'PCS'" th:text="PCS"></option>
                        <option th:value="'KG'" th:text="KG"></option>
                    </select>
                    <div class="invalid-feedback" th:if="${#fields.hasErrors('unitType')}" th:errors="*{unitType}"></div>
                </div>

                <div id="pcs-fields" style="display:none;">
                    <h5>PCS Details</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="numberOfBoxes" class="form-label">Number of Boxes</label>
                            <input type="number" id="numberOfBoxes" class="form-control" th:field="*{numberOfBoxes}"
                                   th:classappend="${#fields.hasErrors('numberOfBoxes')} ? 'is-invalid' : ''"
                                   step="1" min="0" />
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('numberOfBoxes')}" th:errors="*{numberOfBoxes}"></div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="unitsPerBox" class="form-label">Units per Box</label>
                            <input type="number" id="unitsPerBox" class="form-control" th:field="*{unitsPerBox}"
                                   th:classappend="${#fields.hasErrors('unitsPerBox')} ? 'is-invalid' : ''"
                                   step="1" min="0" />
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('unitsPerBox')}" th:errors="*{unitsPerBox}"></div>
                        </div>
                    </div>
                </div>

                <div id="kg-fields" style="display:none;">
                     <h5>KG Details</h5>
                     <div class="row">
                         <div class="col-md-4 mb-3">
                             <label for="weightPerItem" class="form-label">Weight per Item (Kg)</label>
                             <input type="number" id="weightPerItem" class="form-control" th:field="*{weightPerItem}"
                                    th:classappend="${#fields.hasErrors('weightPerItem')} ? 'is-invalid' : ''"
                                    step="0.01" min="0.00" />
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('weightPerItem')}" th:errors="*{weightPerItem}"></div>
                         </div>
                         <div class="col-md-4 mb-3">
                             <label for="totalBagWeight" class="form-label">Total Weight of Bag (Kg)</label>
                             <input type="number" id="totalBagWeight" class="form-control" th:field="*{totalBagWeight}"
                                    th:classappend="${#fields.hasErrors('totalBagWeight')} ? 'is-invalid' : ''"
                                    step="0.01" min="0.00" />
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('totalBagWeight')}" th:errors="*{totalBagWeight}"></div>
                         </div>
                         <div class="col-md-4 mb-3">
                             <label for="totalBags" class="form-label">Total Number of Bags</label>
                             <input type="number" id="totalBags" class="form-control" th:field="*{totalBags}"
                                    th:classappend="${#fields.hasErrors('totalBags')} ? 'is-invalid' : ''"
                                    step="1" min="0" />
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('totalBags')}" th:errors="*{totalBags}"></div>
                         </div>
                     </div>
                </div>

                <hr class="my-4">
                <div class="d-flex justify-content-end">
                    <a th:href="@{/products}" class="btn btn-secondary me-2">Cancel</a>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i> Save Product</button>
                </div>

            </form>
        </div>
    </div>
</div>

<script>
function toggleFields() {
    const unitType = document.getElementById("unitTypeSelect").value;
    document.getElementById("pcs-fields").style.display = unitType === "PCS" ? "block" : "none";
    document.getElementById("kg-fields").style.display = unitType === "KG" ? "block" : "none";
}

window.addEventListener('DOMContentLoaded', () => {
    toggleFields();
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const vendorInput = document.getElementById("vendorInput");
    const vendorList = document.getElementById("vendorList");

    vendorInput.addEventListener("input", function () {
        const query = this.value;
        vendorList.style.width = `${vendorInput.offsetWidth}px`;
        if (query.length < 1) {
            vendorList.style.display = "none";
            return;
        }
        fetch(`/products/vendors/search?query=${encodeURIComponent(query)}`)
            .then(res => res.json())
            .then(data => {
                vendorList.innerHTML = "";
                if (data.length === 0) {
                    vendorList.style.display = "none";
                    return;
                }
                data.forEach(name => {
                    const item = document.createElement("a");
                    item.href = "#";
                    item.classList.add("list-group-item", "list-group-item-action");
                    item.textContent = name;
                    item.addEventListener("click", function (e) {
                        e.preventDefault();
                        vendorInput.value = name;
                        vendorList.style.display = "none";
                    });
                    vendorList.appendChild(item);
                });
                vendorList.style.display = "block";
            });
    });

    document.addEventListener("click", function (e) {
        if (!vendorList.contains(e.target) && e.target !== vendorInput) {
            vendorList.style.display = "none";
        }
    });
});
</script>

</body>
</html>