<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--	<meta charset="UTF-8">-->
<!--	<title>Customers</title>-->
<!--</head>-->
<!--<body>-->
<!--	<h2>Customers</h2>-->
<!--	<a th:href="@{/customers/new}">Add Customer</a>-->
<!--	<table border="1">-->
<!--		<thead>-->
<!--			<tr>-->
<!--				<th>ID</th><th>Name</th><th>Phone</th><th>Due</th><th>Edit</th><th>Delete</th>-->
<!--			</tr>-->
<!--		</thead>-->
<!--		<tbody>-->
<!--			<tr th:each="c : ${customers}">-->
<!--				<td th:text="${c.id}"></td>-->
<!--				<td th:text="${c.name}"></td>-->
<!--				<td th:text="${c.phone}"></td>-->
<!--				<td th:text="${c.due}"></td>-->
<!--				<td><a th:href="@{'/customers/' + ${c.id} + '/edit'}">Edit</a></td>-->
<!--				<td>-->
<!--					 ✅ Delete form (POST to /customers/{id}/delete) -->
<!--					<form th:action="@{/customers/{id}/delete(id=${c.id})}" method="post" style="display:inline;">-->
<!--						<button type="submit" onclick="return confirm('Are you sure you want to delete this customer?');">Delete</button>-->
<!--				    </form>-->
<!--				</td>-->
<!--			</tr>-->
<!--		</tbody>-->
<!--	</table>-->
<!--</body>-->
<!--</html> -->


<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Manage Customers</title>-->
<!--     Bootstrap 5 CSS -->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--     Font Awesome for Icons -->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--    <style>-->
<!--        body { background-color: #f8f9fa; }-->
<!--        .list-card { margin-top: 2rem; margin-bottom: 4rem; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
	
<!--	<div th:replace="~{fragments/navbar :: navbar}"></div>	-->
	
<!--<div class="container">-->
<!--    <div class="card list-card shadow-sm">-->
<!--        <div class="card-header bg-light py-3 d-flex justify-content-between align-items-center">-->
<!--            <h2 class="h4 mb-0">-->
<!--                <i class="fas fa-users me-2"></i>Manage Customers-->
<!--            </h2>-->
<!--            <a th:href="@{/customers/new}" class="btn btn-primary btn-sm">-->
<!--                <i class="fas fa-plus me-1"></i>Add New Customer-->
<!--            </a>-->
<!--        </div>-->
<!--        <div class="card-body">-->
<!--             Success/Error Messages -->
<!--            <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>-->
<!--            <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>-->

<!--            <div class="table-responsive">-->
<!--                <table class="table table-striped table-hover">-->
<!--                    <thead class="table-light">-->
<!--                        <tr>-->
<!--                            <th>ID</th>-->
<!--                            <th>Name</th>-->
<!--                            <th>Phone</th>-->
<!--                            <th class="text-end">Due</th>-->
<!--                            <th class="text-center">Actions</th>-->
<!--                        </tr>-->
<!--                    </thead>-->
<!--                    <tbody>-->
<!--                        <tr th:each="c : ${customers}">-->
<!--                            <td th:text="${c.id}"></td>-->
<!--                            <td th:text="${c.name}"></td>-->
<!--                            <td th:text="${c.phone}"></td>-->
<!--                            <td class="text-end" th:text="${'₹' + #numbers.formatDecimal(c.due, 1, 2, 'POINT')}"></td>-->
<!--                            <td class="text-center">-->
<!--                                <a th:href="@{'/customers/' + ${c.id} + '/edit'}" class="btn btn-warning btn-sm">-->
<!--                                    <i class="fas fa-edit"></i>-->
<!--                                </a>-->
<!--                                <form th:action="@{/customers/{id}/delete(id=${c.id})}" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this customer?');">-->
<!--                                    <button type="submit" class="btn btn-danger btn-sm">-->
<!--                                        <i class="fas fa-trash"></i>-->
<!--                                    </button>-->
<!--                                </form>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                    </tbody>-->
<!--                </table>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->



<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--<meta charset="UTF-8">-->
<!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--<title>Manage Customers</title>-->
<!-- Bootstrap 5 CSS -->
<!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!-- Font Awesome for Icons -->
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">-->
<!--<style>-->
<!--@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');-->

<!--* {-->
<!--font-family: 'Inter', sans-serif;-->
<!--}-->

<!--body { -->
<!--background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);-->
<!--min-height: 100vh;-->
<!--padding-bottom: 3rem;-->
<!--}-->

<!--.container {-->
<!--max-width: 1200px;-->
<!--}-->

<!--.list-card { -->
<!--margin-top: 2rem; -->
<!--margin-bottom: 2rem;-->
<!--border: none;-->
<!--border-radius: 16px;-->
<!--overflow: hidden;-->
<!--box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);-->
<!--background: #ffffff;-->
<!--animation: fadeInUp 0.5s ease-out;-->
<!--}-->

<!--@keyframes fadeInUp {-->
<!--from {-->
<!--opacity: 0;-->
<!--transform: translateY(20px);-->
<!--}-->
<!--to {-->
<!--opacity: 1;-->
<!--transform: translateY(0);-->
<!--}-->
<!--}-->

<!--.card-header {-->
<!--background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;-->
<!--border: none !important;-->
<!--padding: 1.75rem 2rem !important;-->
<!--color: white;-->
<!--}-->

<!--.card-header h2 {-->
<!--color: white !important;-->
<!--font-weight: 600;-->
<!--font-size: 1.5rem;-->
<!--margin: 0;-->
<!--letter-spacing: -0.3px;-->
<!--}-->

<!--.card-header h2 i {-->
<!--opacity: 0.95;-->
<!--}-->

<!--.btn-primary {-->
<!--background: #3498db;-->
<!--border: none;-->
<!--border-radius: 8px;-->
<!--padding: 0.6rem 1.5rem;-->
<!--font-weight: 500;-->
<!--transition: all 0.3s ease;-->
<!--box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);-->
<!--}-->

<!--.btn-primary:hover {-->
<!--background: #2980b9;-->
<!--transform: translateY(-1px);-->
<!--box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);-->
<!--}-->

<!--.card-body {-->
<!--padding: 2rem;-->
<!--}-->

<!--.alert {-->
<!--border: none;-->
<!--border-radius: 10px;-->
<!--padding: 1rem 1.25rem;-->
<!--margin-bottom: 1.5rem;-->
<!--animation: slideIn 0.4s ease-out;-->
<!--font-weight: 500;-->
<!--}-->

<!--@keyframes slideIn {-->
<!--from {-->
<!--opacity: 0;-->
<!--transform: translateX(-10px);-->
<!--}-->
<!--to {-->
<!--opacity: 1;-->
<!--transform: translateX(0);-->
<!--}-->
<!--}-->

<!--.alert-success {-->
<!--background: #d4edda;-->
<!--color: #155724;-->
<!--border-left: 4px solid #28a745;-->
<!--}-->

<!--.alert-danger {-->
<!--background: #f8d7da;-->
<!--color: #721c24;-->
<!--border-left: 4px solid #dc3545;-->
<!--}-->

<!--.table-responsive {-->
<!--border-radius: 10px;-->
<!--box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);-->
<!--}-->

<!--.table {-->
<!--margin-bottom: 0;-->
<!--}-->

<!--.table thead {-->
<!--background: #f8f9fa;-->
<!--}-->

<!--.table thead th {-->
<!--border: none;-->
<!--padding: 1rem;-->
<!--font-weight: 600;-->
<!--font-size: 0.85rem;-->
<!--text-transform: uppercase;-->
<!--letter-spacing: 0.5px;-->
<!--color: #495057;-->
<!--border-bottom: 2px solid #dee2e6;-->
<!--}-->

<!--.table tbody tr {-->
<!--transition: all 0.2s ease;-->
<!--border-bottom: 1px solid #f1f3f5;-->
<!--}-->

<!--.table tbody tr:hover {-->
<!--background: #f8f9fa;-->
<!--box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);-->
<!--}-->

<!--.table tbody td {-->
<!--padding: 1rem;-->
<!--vertical-align: middle;-->
<!--border: none;-->
<!--color: #495057;-->
<!--}-->

<!--.table tbody td:first-child {-->
<!--font-weight: 600;-->
<!--color: #2c3e50;-->
<!--}-->

<!--.table tbody td:nth-child(2) {-->
<!--font-weight: 500;-->
<!--color: #34495e;-->
<!--}-->

<!--.table tbody td:nth-child(3) {-->
<!--color: #6c757d;-->
<!--}-->

<!--.table tbody td:nth-child(4) {-->
<!--font-weight: 600;-->
<!--font-size: 1rem;-->
<!--color: #2c3e50;-->
<!--}-->

<!--.btn-warning {-->
<!--background: #f39c12;-->
<!--border: none;-->
<!--border-radius: 6px;-->
<!--padding: 0.45rem 0.75rem;-->
<!--transition: all 0.2s ease;-->
<!--color: white;-->
<!--}-->

<!--.btn-warning:hover {-->
<!--background: #e67e22;-->
<!--transform: translateY(-1px);-->
<!--color: white;-->
<!--box-shadow: 0 3px 8px rgba(243, 156, 18, 0.3);-->
<!--}-->

<!--.btn-danger {-->
<!--background: #e74c3c;-->
<!--border: none;-->
<!--border-radius: 6px;-->
<!--padding: 0.45rem 0.75rem;-->
<!--transition: all 0.2s ease;-->
<!--}-->

<!--.btn-danger:hover {-->
<!--background: #c0392b;-->
<!--transform: translateY(-1px);-->
<!--box-shadow: 0 3px 8px rgba(231, 76, 60, 0.3);-->
<!--}-->

<!--.text-center form {-->
<!--display: inline-block;-->
<!--margin-left: 0.5rem;-->
<!--}-->

<!--/* Mobile Responsive */-->
<!--@media (max-width: 768px) {-->
<!--.card-header {-->
<!--padding: 1.25rem 1rem !important;-->
<!--flex-direction: column;-->
<!--align-items: stretch !important;-->
<!--gap: 1rem;-->
<!--}-->

<!--.card-header h2 {-->
<!--font-size: 1.25rem;-->
<!--text-align: center;-->
<!--}-->

<!--.card-body {-->
<!--padding: 1rem;-->
<!--}-->

<!--.btn-primary {-->
<!--width: 100%;-->
<!--}-->

<!--.table {-->
<!--font-size: 0.85rem;-->
<!--}-->

<!--.table thead th {-->
<!--padding: 0.75rem 0.5rem;-->
<!--font-size: 0.75rem;-->
<!--}-->

<!--.table tbody td {-->
<!--padding: 0.75rem 0.5rem;-->
<!--}-->

<!--.table tbody td:nth-child(4) {-->
<!--font-size: 0.9rem;-->
<!--}-->

<!--.btn-sm {-->
<!--padding: 0.35rem 0.6rem;-->
<!--font-size: 0.8rem;-->
<!--}-->

<!--.text-center form {-->
<!--margin-left: 0.25rem;-->
<!--}-->
<!--}-->

<!--@media (max-width: 576px) {-->
<!--.container {-->
<!--padding-left: 0.75rem;-->
<!--padding-right: 0.75rem;-->
<!--}-->

<!--.list-card {-->
<!--margin-top: 1rem;-->
<!--border-radius: 12px;-->
<!--}-->

<!--.card-header h2 {-->
<!--font-size: 1.1rem;-->
<!--}-->

<!--.table {-->
<!--font-size: 0.8rem;-->
<!--}-->

<!--.table thead th {-->
<!--padding: 0.6rem 0.4rem;-->
<!--}-->

<!--.table tbody td {-->
<!--padding: 0.6rem 0.4rem;-->
<!--}-->
<!--}-->

<!--/* Scrollbar Styling */-->
<!--.table-responsive::-webkit-scrollbar {-->
<!--height: 6px;-->
<!--}-->

<!--.table-responsive::-webkit-scrollbar-track {-->
<!--background: #f1f3f5;-->
<!--border-radius: 10px;-->
<!--}-->

<!--.table-responsive::-webkit-scrollbar-thumb {-->
<!--background: #95a5a6;-->
<!--border-radius: 10px;-->
<!--}-->

<!--.table-responsive::-webkit-scrollbar-thumb:hover {-->
<!--background: #7f8c8d;-->
<!--}-->

<!--/* Button Focus States */-->
<!--.btn:focus {-->
<!--box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25);-->
<!--}-->

<!--.btn-warning:focus {-->
<!--box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.25);-->
<!--}-->

<!--.btn-danger:focus {-->
<!--box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.25);-->
<!--}-->

<!--/* Empty State */-->
<!--.table tbody tr:only-child td[colspan] {-->
<!--padding: 3rem;-->
<!--text-align: center;-->
<!--color: #95a5a6;-->
<!--font-weight: 500;-->
<!--}-->
<!--</style>-->
<!--</head>-->
<!--<body>-->

<!--<div th:replace="~{fragments/navbar :: navbar}"></div>-->

<!--<div class="container" style="margin-top: 5rem;">-->
<!--<div class="card list-card shadow-sm">-->
<!--<div class="card-header bg-light py-3 d-flex justify-content-between align-items-center">-->
<!--<h2 class="h4 mb-0">-->
<!--<i class="fas fa-users me-2"></i>Manage Customers-->
<!--</h2>-->
<!--<a th:href="@{/customers/new}" class="btn btn-primary btn-sm">-->
<!--<i class="fas fa-plus me-1"></i>Add New Customer-->
<!--</a>-->
<!--</div>-->
<!--<div class="card-body">-->
<!-- Success/Error Messages -->
<!--<div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>-->
<!--<div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>-->

<!--<div class="table-responsive">-->
<!--<table class="table table-striped table-hover">-->
<!--<thead class="table-light">-->
<!--<tr>-->
<!--<th>ID</th>-->
<!--<th>Name</th>-->
<!--<th>Phone</th>-->
<!--<th class="text-end">Due</th>-->
<!--<th class="text-center">Actions</th>-->
<!--</tr>-->
<!--</thead>-->
<!--<tbody>-->
<!--<tr th:each="c : ${customers}">-->
<!--<td th:text="${c.id}"></td>-->
<!--<td th:text="${c.name}"></td>-->
<!--<td th:text="${c.phone}"></td>-->
<!--<td class="text-end" th:text="${'₹' + #numbers.formatDecimal(c.due, 1, 2, 'POINT')}"></td>-->
<!--<td class="text-center">-->
<!--<a th:href="@{'/customers/' + ${c.id} + '/edit'}" class="btn btn-warning btn-sm">-->
<!--<i class="fas fa-edit"></i>-->
<!--</a>-->
<!--<form th:action="@{/customers/{id}/delete(id=${c.id})}" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this customer?');">-->
<!--<button type="submit" class="btn btn-danger btn-sm">-->
<!--<i class="fas fa-trash"></i>-->
<!--</button>-->
<!--</form>-->
<!--</td>-->
<!--</tr>-->
<!--</tbody>-->
<!--</table>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--<script>-->
<!--// Smooth interactions-->
<!--document.addEventListener('DOMContentLoaded', function() {-->
<!--// Add subtle hover effect to table rows-->
<!--const rows = document.querySelectorAll('tbody tr');-->
<!--rows.forEach(row => {-->
<!--row.addEventListener('mouseenter', function() {-->
<!--this.style.transform = 'scale(1.002)';-->
<!--});-->
<!--row.addEventListener('mouseleave', function() {-->
<!--this.style.transform = 'scale(1)';-->
<!--});-->
<!--});-->
<!--});-->
<!--</script>-->
<!--</body>-->
<!--</html>-->



<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Customers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* All your existing CSS goes here... */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        * { font-family: 'Inter', sans-serif; }
        body { background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%); min-height: 100vh; padding-bottom: 3rem; }
        .container { max-width: 1200px; }
        .list-card { margin-top: 2rem; margin-bottom: 2rem; border: none; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); background: #ffffff; animation: fadeInUp 0.5s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card-header { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important; border: none !important; padding: 1.75rem 2rem !important; color: white; }
        .card-header h2 { color: white !important; font-weight: 600; font-size: 1.5rem; margin: 0; letter-spacing: -0.3px; }
        .card-header h2 i { opacity: 0.95; }
        .btn-primary { background: #3498db; border: none; border-radius: 8px; padding: 0.6rem 1.5rem; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3); }
        .btn-primary:hover { background: #2980b9; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4); }
        .card-body { padding: 2rem; }
        .alert { border: none; border-radius: 10px; padding: 1rem 1.25rem; margin-bottom: 1.5rem; animation: slideIn 0.4s ease-out; font-weight: 500; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .alert-success { background: #d4edda; color: #155724; border-left: 4px solid #28a745; }
        .alert-danger { background: #f8d7da; color: #721c24; border-left: 4px solid #dc3545; }
        .table-responsive { border-radius: 10px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); }
        .table { margin-bottom: 0; }
        .table thead { background: #f8f9fa; }
        .table thead th { border: none; padding: 1rem; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; color: #495057; border-bottom: 2px solid #dee2e6; }
        .table tbody tr { transition: all 0.2s ease; border-bottom: 1px solid #f1f3f5; }
        .table tbody tr:hover { background: #f8f9fa; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04); }
        .table tbody td { padding: 1rem; vertical-align: middle; border: none; color: #495057; }
        .table tbody td:first-child { font-weight: 600; color: #2c3e50; }
        .table tbody td:nth-child(2) { font-weight: 500; color: #34495e; }
        .table tbody td:nth-child(3) { color: #6c757d; }
        .table tbody td:nth-child(4) { font-weight: 600; font-size: 1rem; color: #2c3e50; }
        .btn-warning { background: #f39c12; border: none; border-radius: 6px; padding: 0.45rem 0.75rem; transition: all 0.2s ease; color: white; }
        .btn-warning:hover { background: #e67e22; transform: translateY(-1px); color: white; box-shadow: 0 3px 8px rgba(243, 156, 18, 0.3); }
        .btn-danger { background: #e74c3c; border: none; border-radius: 6px; padding: 0.45rem 0.75rem; transition: all 0.2s ease; }
        .btn-danger:hover { background: #c0392b; transform: translateY(-1px); box-shadow: 0 3px 8px rgba(231, 76, 60, 0.3); }
        .text-center form { display: inline-block; margin-left: 0.5rem; }
        /* Mobile Responsive */
        @media (max-width: 768px) { .card-header { padding: 1.25rem 1rem !important; flex-direction: column; align-items: stretch !important; gap: 1rem; } .card-header h2 { font-size: 1.25rem; text-align: center; } .card-body { padding: 1rem; } .btn-primary { width: 100%; } .table { font-size: 0.85rem; } .table thead th { padding: 0.75rem 0.5rem; font-size: 0.75rem; } .table tbody td { padding: 0.75rem 0.5rem; } .table tbody td:nth-child(4) { font-size: 0.9rem; } .btn-sm { padding: 0.35rem 0.6rem; font-size: 0.8rem; } .text-center form { margin-left: 0.25rem; } }
        @media (max-width: 576px) { .container { padding-left: 0.75rem; padding-right: 0.75rem; } .list-card { margin-top: 1rem; border-radius: 12px; } .card-header h2 { font-size: 1.1rem; } .table { font-size: 0.8rem; } .table thead th { padding: 0.6rem 0.4rem; } .table tbody td { padding: 0.6rem 0.4rem; } }
        /* Scrollbar Styling */
        .table-responsive::-webkit-scrollbar { height: 6px; }
        .table-responsive::-webkit-scrollbar-track { background: #f1f3f5; border-radius: 10px; }
        .table-responsive::-webkit-scrollbar-thumb { background: #95a5a6; border-radius: 10px; }
        .table-responsive::-webkit-scrollbar-thumb:hover { background: #7f8c8d; }
        /* Button Focus States */
        .btn:focus { box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25); }
        .btn-warning:focus { box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.25); }
        .btn-danger:focus { box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.25); }
        /* Empty State */
        .table tbody tr:only-child td[colspan] { padding: 3rem; text-align: center; color: #95a5a6; font-weight: 500; }
        .empty-state { text-align: center; padding: 3rem; color: #95a5a6; font-weight: 500; }
    </style>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<div class="container" style="margin-top: 5rem;">
    <div class="card list-card shadow-sm">
        <div class="card-header bg-light py-3 d-flex justify-content-between align-items-center">
            <h2 class="h4 mb-0"><i class="fas fa-users me-2"></i>Manage Customers</h2>
            <a th:href="@{/customers/new}" class="btn btn-primary btn-sm"><i class="fas fa-plus me-1"></i>Add New Customer</a>
        </div>
        <div class="card-body">
            <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
            <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

            <form th:action="@{/customers}" method="get" class="mb-4">
                <div class="row g-3 align-items-end">
                    <div class="col-md-5">
                        <label for="query" class="form-label">Search by Name/Phone</label>
                        <input type="text" id="query" name="query" class="form-control" th:value="${query}" placeholder="Enter name or phone number...">
                    </div>
                    <div class="col-md-4">
                        <label for="groupId" class="form-label">Filter by Group</label>
                        <select id="groupId" name="groupId" class="form-select">
                            <option value="">All Groups</option>
                            <option th:each="group : ${customerGroups}"
                                    th:value="${group.id}"
                                    th:text="${group.name}"
                                    th:selected="${group.id == selectedGroupId}">
                            </option>
                        </select>
                    </div>
                    <div class="col-md-3 d-flex">
                        <button type="submit" class="btn btn-primary w-100 me-2"><i class="fas fa-filter me-1"></i>Filter</button>
                        <a th:href="@{/customers}" class="btn btn-secondary w-100"><i class="fas fa-times me-1"></i>Clear</a>
                    </div>
                </div>
            </form>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <tbody>
                        <tr th:if="${customerPage.empty}">
                            <td colspan="5" class="empty-state">
                                No customers found matching your criteria.
                            </td>
                        </tr>
                        <tr th:each="c : ${customerPage.content}">
                            <td th:text="${c.partyCode}"></td>
                            <td th:text="${c.name}"></td>
                            <td th:text="${c.phone}"></td>
                            <td class="text-end" th:text="${'₹' + #numbers.formatDecimal(c.due, 1, 2, 'POINT')}"></td>
                            <td class="text-center">
                                <a th:href="@{'/customers/' + ${c.id} + '/edit'}" class="btn btn-warning btn-sm">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <form th:action="@{/customers/{id}/delete(id=${c.id})}" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this customer?');">
                                    <button type="submit" class="btn btn-danger btn-sm">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

			<nav aria-label="Page navigation" th:if="${customerPage.totalPages > 1}" class="mt-4 d-flex justify-content-center">
			    
			    <th:block th:with="
			        currentPage = ${customerPage.number},
			        totalPages = ${customerPage.totalPages},
			        isFirstPage = ${customerPage.first},
			        isLastPage = ${customerPage.last}">

			        <ul class="pagination">
			            
			            <li class="page-item" th:classappend="${isFirstPage} ? 'disabled'">
			                <a class="page-link" th:href="@{/customers(page=0, query=${query}, groupId=${selectedGroupId})}">
			                    <span aria-hidden="true">&laquo;</span> First
			                </a>
			            </li>

			            <li class="page-item" th:classappend="${isFirstPage} ? 'disabled'">
			                <a class="page-link" th:href="@{/customers(page=${currentPage - 1}, query=${query}, groupId=${selectedGroupId})}">Previous</a>
			            </li>

			            <th:block th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
			                <li class="page-item"
			                    th:if="${i < 2 or i > totalPages - 3 or (i >= currentPage - 1 and i <= currentPage + 1)}"
			                    th:classappend="${i == currentPage} ? 'active'">
			                    <a class="page-link" th:href="@{/customers(page=${i}, query=${query}, groupId=${selectedGroupId})}" th:text="${i + 1}"></a>
			                </li>

			                <li class="page-item disabled"
			                    th:if="${(i == 2 and currentPage > 3) or (i == totalPages - 3 and currentPage < totalPages - 4)}">
			                    <span class="page-link">...</span>
			                </li>
			            </th:block>

			            <li class="page-item" th:classappend="${isLastPage} ? 'disabled'">
			                <a class="page-link" th:href="@{/customers(page=${currentPage + 1}, query=${query}, groupId=${selectedGroupId})}">Next</a>
			            </li>
			            
			            <li class="page-item" th:classappend="${isLastPage} ? 'disabled'">
			                <a class="page-link" th:href="@{/customers(page=${totalPages - 1}, query=${query}, groupId=${selectedGroupId})}">
			                    Last <span aria-hidden="true">&raquo;</span>
			                </a>
			            </li>
			        </ul>
			    </th:block>
			</nav>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>